"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[675],{69675:(t,e,o)=>{o.r(e),o.d(e,{default:()=>s,generateCsrfHeaders:()=>i,generateCsrfToken:()=>a,removeCsrfToken:()=>c});o(76918),o(23792),o(62062),o(54743),o(11745),o(38309),o(16573),o(78100),o(77936),o(79432),o(26099),o(27495),o(90906),o(21489),o(48140),o(81630),o(72170),o(75044),o(69539),o(31694),o(89955),o(21903),o(91134),o(33206),o(44496),o(66651),o(12887),o(19369),o(66812),o(8995),o(31575),o(36072),o(88747),o(28845),o(29423),o(57301),o(373),o(86614),o(41405),o(37467),o(44732),o(33684),o(79577),o(98992),o(81454),o(42207),o(55815),o(64979),o(79739);var r=/^[-_a-zA-Z0-9]{4,22}$/,n=/^[-_\/+a-zA-Z0-9]{24,}$/;function a(t){var e=t.querySelector('input[data-controller="csrf-protection"], input[name="_csrf_token"]');if(e){var o=e.getAttribute("data-csrf-protection-cookie-value"),a=e.value;if(!o&&r.test(a)&&(e.setAttribute("data-csrf-protection-cookie-value",o=a),e.defaultValue=a=btoa(String.fromCharCode.apply(null,(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(18)))),e.dispatchEvent(new Event("change",{bubbles:!0}))),o&&n.test(a)){var i=o+"_"+a+"="+o+"; path=/; samesite=strict";document.cookie="https:"===window.location.protocol?"__Host-"+i+"; secure":i}}}function i(t){var e={},o=t.querySelector('input[data-controller="csrf-protection"], input[name="_csrf_token"]');if(!o)return e;var a=o.getAttribute("data-csrf-protection-cookie-value");return n.test(o.value)&&r.test(a)&&(e[a]=o.value),e}function c(t){var e=t.querySelector('input[data-controller="csrf-protection"], input[name="_csrf_token"]');if(e){var o=e.getAttribute("data-csrf-protection-cookie-value");if(n.test(e.value)&&r.test(o)){var a=o+"_"+e.value+"=0; path=/; samesite=strict; max-age=0";document.cookie="https:"===window.location.protocol?"__Host-"+a+"; secure":a}}}document.addEventListener("submit",(function(t){a(t.target)}),!0),document.addEventListener("turbo:submit-start",(function(t){var e=i(t.detail.formSubmission.formElement);Object.keys(e).map((function(o){t.detail.formSubmission.fetchRequest.headers[o]=e[o]}))})),document.addEventListener("turbo:submit-end",(function(t){c(t.detail.formSubmission.formElement)}));const s="csrf-protection-controller"}}]);